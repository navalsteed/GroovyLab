apply plugin: 'java'

compileJava.options.encoding='UTF-8'

sourceSets {
    main {
        java {
            List<File> classpathFiles = 'lib/GroovyLabSrc lib/stringtemplate-3.2.1.jar lib/gsl-linux-x86_64.jar lib/gsl-linux-x86.jar lib/ApacheCommonMaths.jar lib/gsl-windows-x86.jar lib/gsl-windows-x86_64.jar lib/asm-all-4.1.jar lib/ejml024.jar lib/GroovySciHelp.jar lib/JASYMCA.jar lib/JFreeChart.jar lib/JavaCompiler.jar lib/MTJColtSGTJCUDA.jar lib/NumericalRecipesNUMAL.jar lib/PDFRenderer.jar lib/rsyntaxtextarea.jar  lib/jSciJPlasmaJSparseJTransforms.jar lib/antlr-2.7.7.jar lib/ant-1.8.4.jar lib/arpack_combo-0.1.jar lib/asm-4.0.jar lib/asm-analysis-4.0.jar lib/asm-commons-4.0.jar lib/asm-tree-4.0.jar lib/asm-util-4.0.jar  lib/commons-cli-1.2.jar lib/commons-logging-1.1.1.jar lib/csparsej.jar lib/f2jutil.jar lib/fjbg.jar lib/funclate-131.jar lib/forkjoin.jar lib/groovy-all-2.4.7.jar  lib/jSci.jar lib/jansi-1.6.jar lib/jblas.jar lib/jdk6Help.jar lib/jhall.jar lib/jline-2.11.jar lib/jplasma.jar lib/javacpp.jar lib/totallylazy-1193.jar lib/jsearch.jar lib/jtransforms.jar lib/junit-4.10.jar lib/hamcrest-library-1.3.jar lib/jzy3D.jar lib/netlib-java-0.9.3.jar lib/utterlyidle-742.jar lib/matlabscilab.jar lib/hamcrest-core-1.3.jar lib/totallylazy-1193.jar lib/gsl.jar lib/optimization.jar lib/yadic-171.jar lib/jarjar-1.1.jar lib/language_support.jar lib/junit-dep-4.8.2.jar lib/jna-4.0.0.jar lib/objenesis-1.2.jar lib/cglib-nodep-2.2.jar lib/rhino-1.7R4.jar lib/itext-2.1.5.jar GroovyLabSrc'.split().collect({file(it)})
            compileClasspath = compileClasspath + files(classpathFiles)
            srcDir "GroovyLabSrc"
    }
   }
}

jar {
    baseName="GroovyLab"
    includeEmptyDirs = false

    manifest {
        attributes('Class-Path':'lib/ApacheCommonMaths.jar lib/gsl-linux-x86.jar lib/gsl-linux-x86_64.jar lib/funclate-131.jar lib/stringtemplate-3.2.1.jar lib/rhino-1.7R4.jar lib/junit-dep-4.8.2.jar lib/jna-4.0.0.jar lib/asm-all-4.1.jar lib/gsl-windows-x86.jar lib/GroovyLabSrc lib/ejml024.jar lib/gsl-windows-x86_64.jar  lib/GroovySciHelp.jar lib/JASYMCA.jar lib/JFreeChart.jar lib/JavaCompiler.jar lib/MTJColtSGTJCUDA.jar lib/jSciJPlasmaJSparseJTransforms.jar lib/NumericalRecipesNUMAL.jar lib/PDFRenderer.jar lib/javacpp.jar lib/rsyntaxtextarea.jar  lib/antlr-2.7.7.jar lib/ant-1.8.4.jar lib/arpack_combo-0.1.jar lib/asm-4.0.jar lib/asm-analysis-4.0.jar lib/asm-commons-4.0.jar lib/asm-tree-4.0.jar lib/asm-util-4.0.jar  lib/commons-cli-1.2.jar lib/commons-logging-1.1.1.jar lib/csparsej.jar lib/f2jutil.jar lib/fjbg.jar lib/forkjoin.jar lib/groovy-all-2.4.7.jar lib/itext-2.1.5.jar lib/jSci.jar lib/jansi-1.6.jar lib/jblas.jar lib/jdk6Help.jar lib/jhall.jar lib/jline-2.11.jar lib/jplasma.jar lib/jsearch.jar lib/jtransforms.jar lib/junit-4.10.jar lib/jzy3D.jar lib/netlib-java-0.9.3.jar lib/utterlyidle-742.jar lib/hamcrest-library-1.3.jar lib/hamcrest-core-1.3.jar lib/matlabscilab.jar lib/totallylazy-1193.jar lib/gsl.jar lib/optimization.jar lib/language_support.jar lib/cglib-nodep-2.2.jar lib/objenesis-1.2.jar lib/yadic-171.jar  lib/jarjar-1.1.jar',
'Main-Class':'gExec.gLab.gLab')
    }

   def extensions = ['db', 'gcsi', 'ggsci', 'gif', 'groovy', 'gsc', 'gsci', 'gsci-test', 'gsciTest', 'gscitest',
                     'gssci', 'htm', 'html', 'jpg', 'm', 'mat', 'plots-gsci', 'plots-ssci', 'png', 'properties', 
                     'ssci', 'sssci', 'txt', 'wav-gsci', 'weka-gsci', 'css', 'class'] 

   def additionalFiles = ['groovySci/math/array/EJMLDev', 'Jama/ChangeLog', 'wavelets/jLabCommandHistory.log']

   from(sourceSets.main.java.srcDirs) {
      extensions.each({extension -> include "**/*.${extension}"})
      additionalFiles.each({additionalFile -> include "$additionalFile"})
   }
}


